# 无障碍 (A11y)

当前项目存在两类 A11y 能力：

1) **trace.page.snapshotA11y**
- 基于 Playwright `accessibility.snapshot`，返回可访问性树。
- 供 step/trace 层解析 `a11yNodeId` 与 `a11yHint`。
- 在 `agent/src/runner/trace/*` 中使用。

2) **axe 扫描（legacy）**
- `agent/src/runner/actions/a11y.ts` 使用 `@axe-core/playwright`。
- 用于违规检测与报告输出（结果结构化，包含 counts/violations）。

## 结果与用途

- **snapshotA11y**：输出树状 JSON 字符串；供定位与回放使用。
- **axe scan**：输出违规报告；用于诊断与审计。

## 说明

- step 执行优先依赖 snapshotA11y；当 `a11yHint` 解析失败时会返回结构化错误。
- axe 扫描与 step 执行相互独立，避免影响自动化的确定性。
